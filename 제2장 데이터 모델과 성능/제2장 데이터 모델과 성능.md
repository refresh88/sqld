# 제2장 데이터 모델과 성능

---

[틀린문제](https://www.notion.so/e7f85a4447ba4a619aa78451629d3900?pvs=21)

- 성능 데이터 모델이란?
    - 데이터베이스 성능 향상을 목적으로 설계단계의 데이터 모델링 때부터 성능과 관련된 사항이 데이터 모델링에 반영될 수 있도록 하는것.

- 성능을 고려한 데이터 모델링의 순서
    1. 데이터 모델링을 할 때 정규화를 정확하게 수행한다.
    2. 데이터베이스 용량산정을 수행한다.
    3. 데이터베이스에 발생되는 트랜잭션의 유형을 파악한다.
    4. 용량과 트랜잭션의 유형에 따라 반정규화를 수행한다.
    5. 이력 모델의 조정, PK/FK 조정, 슈퍼타임/서브타입 조정 등을 수행한다.
    6. 성능관점에서 데이터 모델을 검증한다.

- 정규화 정리

- 반정규
    - 반정규화는 정규화된 엔티티, 속성, 관계에 대해 시스템의 성능향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법을 의미한다.
    - 반정규화는 데이터를 중복하여 성능을 향상시키기 위한 기법이라고 정의할 수 있고 좀 더 넓은 의미의 반정규화는 성능을 향상시키기 위해 정규화된 데이터 모델에서 중복, 통합, 분리 등을 수행하는 모든 과정을 의미한다.
    - 데이터 무결성이 깨질 수 있는 위험을 무릅쓰고 데이터를 중복하여 반정규화를 적용하는 이유는, **데이터를 조회할 때 디스크 I/O량이 많아서 성능이 저하되거나 경로가 너무 멀어 조인으로 인한 성능저하가 예상되거나 컬럼을 계산하여 읽을 때 성능이 저할될 것이 예상되는 경우 반정규화를 수행하게 된다**.
    
- 개별 테이블을 모두 조회하는 트랜잭션이라는 가정하에,
UNION/UNION ALL을 사용하면 개별조회에 따른 시간소요와 이것을 조합하는 성능저하가 발생된다. 따라서, 하나의 테이블로 통합하도록 하고 대신 pk체계나 일반 속성에 각 컬럼을 구분할 수 있도록 구분자를 부여한다.

- **트랜잭션은 항상 전체를 통합하여 분석 처리**하는데 슈퍼-서브타입이 `하나의 테이블로 통합`되어 있으면 하나의 테이블에 집적된 데이터만 읽어 처리할 수 있기 때문에 다른 형식에 비해 더 성능이 우수하다.

- 인덱스는 상수값을 가장 먼저, 그다음이 범위 유형이 오게 하는것이 인덱스 액세스 범위를 좁힐 수 있는 가장 좋은 방법임.